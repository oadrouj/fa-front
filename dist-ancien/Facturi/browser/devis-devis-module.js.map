{"version":3,"sources":["./src/app/devis/devis.component.ts","./src/app/devis/devis.component.html","./src/app/devis/devis.module.ts"],"names":[],"mappings":"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","file":"devis-devis-module.js","sourcesContent":["import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core'\r\nimport { Subject, zip } from 'rxjs'\r\nimport { DevisItem } from '../../shared/models/DevisItem'\r\nimport { DialogStatus } from '../../shared/enums/DialogState.enum'\r\nimport { GlobalEventsService } from '@shared/globalEventsService'\r\nimport {\r\n  ClientForAutoCompleteDto,\r\n  ClientForAutoCompleteDtoListResultDto,\r\n  ClientServiceProxy,\r\n  DevisDto,\r\n  DevisItemDto,\r\n  DevisServiceProxy,\r\n  DevisStatutEnum,\r\n  FactureDto,\r\n  FileApiServiceProxy,\r\n  InfosEntrepriseServiceProxy,\r\n} from '@shared/service-proxies/service-proxies'\r\nimport * as moment from 'moment'\r\nimport { DateHelper } from '@shared/helpers/DateHelper'\r\nimport { ToastService } from '@shared/services/toast.service'\r\nimport { Moment } from 'moment'\r\nimport { DevisDialogComponent } from './devis-dialog/devis-dialog.component'\r\nimport { ConfirmDialogService } from '@shared/services/confirm-dialog.service'\r\nimport { DialogService, DynamicDialogRef } from 'primeng/dynamicdialog'\r\nimport { ConfirmEventType, LazyLoadEvent } from 'primeng/api'\r\nimport { map } from 'rxjs/operators'\r\nimport { TableComponent } from '@app/table/table.component'\r\nimport * as printJS from 'print-js'\r\nimport { FacturesDialogComponent } from '@app/factures/factures-dialog/factures-dialog.component'\r\nimport { AppSessionService } from '@shared/session/app-session.service'\r\n\r\nimport jsPDF from 'jspdf'\r\nimport html2canvas from 'html2canvas'\r\nimport { ItemPreviewComponent } from '@shared/components/item-preview/item-preview.component'\r\nimport { DomSanitizer } from '@angular/platform-browser'\r\nimport { EstimateInvoiceStatusStateService } from '@shared/services/estimate-invoice-status-state.service'\r\nimport { LazyTableService } from '@shared/services/lazy-table.service'\r\nimport { PreviewService } from '@shared/services/preview.service'\r\n\r\n@Component({\r\n  selector: 'app-devis',\r\n  templateUrl: './devis.component.html',\r\n  styleUrls: ['./devis.component.css'],\r\n  providers: [DialogService, EstimateInvoiceStatusStateService],\r\n})\r\nexport class DevisComponent implements OnInit, AfterViewInit {\r\n  remiseAmount: number\r\n  @ViewChild('factureDialog', {})\r\n  sample: DynamicDialogRef\r\n\r\n  @ViewChild('prv', { static: true }) template: ItemPreviewComponent\r\n\r\n  sampleComponent = FacturesDialogComponent\r\n  logoSrc: string\r\n  dialogStatus: DialogStatus\r\n  invoiceDialogStatus: DialogStatus\r\n  devisItemProp: any\r\n  invoiceItemProp: FactureDto[]\r\n  formIsValid: any\r\n  firstLoad = true\r\n\r\n  constructor(\r\n    private _devisServiceProxy: DevisServiceProxy,\r\n    private _clientServiceProxy: ClientServiceProxy,\r\n    private _toastService: ToastService,\r\n    private _confirmDialogService: ConfirmDialogService,\r\n    public dialogService: DialogService,\r\n    public globalEventsService: GlobalEventsService,\r\n    private _sessionService: AppSessionService,\r\n    private _fileApiServiceProxy: FileApiServiceProxy,\r\n    private _sanitizer: DomSanitizer,\r\n    private _estimateInvoiceStatusStateService: EstimateInvoiceStatusStateService,\r\n    private _lazyTableService: LazyTableService,\r\n    private _previewService: PreviewService,\r\n    private _infosEntrepriseService: InfosEntrepriseServiceProxy,\r\n  ) {}\r\n\r\n  favIcon: HTMLLinkElement = document.querySelector('#favIcon')\r\n  ngOnInit() {\r\n    this.globalEventsService.announcedThePageChangedColorSubject(\r\n      `var(--${this.primaryColor}-color`,\r\n    )\r\n\r\n    this.favIcon.href = 'assets/img/DevisLogo.png'\r\n\r\n    this._fileApiServiceProxy.download().subscribe((res) => {\r\n      let objectURL = this._sanitizer.bypassSecurityTrustUrl(\r\n        URL.createObjectURL(res.data),\r\n      )\r\n      this.logoSrc = objectURL as string\r\n    })\r\n\r\n    this._lazyTableService.rowSelected$.subscribe((res) => {\r\n      this.firstLoad && (this.montantTotalAllDevis = this.tableChild.montantTotal)\r\n      this.selectedDevisItem = res\r\n      this.calculateSummaryTotalHTAndTVA()\r\n      this.firstLoad = false\r\n\r\n    })\r\n\r\n  }\r\n\r\n  updateEstimateStatusToValid = (data) => {\r\n    if (data) {\r\n      this.updateApiCall(\r\n        this.selectedDevisItem.id,\r\n        DevisStatutEnum.Valide,\r\n        'Le devis est validé',\r\n      )\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._estimateInvoiceStatusStateService.statusModifier$.subscribe((res) => {\r\n      if (res.target == 'Estimate') {\r\n        switch (res.statusAction) {\r\n          case 'Validate':\r\n            this.dialogStatus = DialogStatus.CheckFormValidity\r\n            this.devisItemProp = { ...this.selectedDevisItem }\r\n            break\r\n\r\n          case 'Convert':\r\n            this.showFactureDialog()\r\n            break\r\n\r\n          case 'Reject':\r\n            this.updateApiCall(\r\n              this.selectedDevisItem.id,\r\n              DevisStatutEnum.Rejete,\r\n              'Le devis est rejeté',\r\n            )\r\n            break\r\n        }\r\n        document.body.style.overflow = 'auto'\r\n      }\r\n    })\r\n  }\r\n\r\n  //#region Properties\r\n  @ViewChild(DevisDialogComponent, { static: false })\r\n  child: DevisDialogComponent\r\n  @ViewChild(TableComponent, { static: false })\r\n  tableChild: TableComponent\r\n  title = 'Devis'\r\n  entrepriseName = ''\r\n  imageSrc = 'assets/img/DevisLogo.png'\r\n  primaryColor = 'green'\r\n  secondaryColor = ''\r\n  tableSelectionColor = 'var(--light-green-color)'\r\n  searchText = ''\r\n  selectedClient: any\r\n  selectedDate: Moment[]\r\n  selectedEcheance: number\r\n  selectedMontant: number\r\n  selectedStatut: DevisStatutEnum\r\n  clientSuggestions: ClientForAutoCompleteDto[]\r\n  echeanceOptions = [15, 20, 30]\r\n  statutOptions = [\r\n    { value: DevisStatutEnum.Cree, label: 'Créé' },\r\n    { value: DevisStatutEnum.Valide, label: 'Validé' },\r\n    { value: DevisStatutEnum.Converti, label: 'Converti' },\r\n    { value: DevisStatutEnum.Rejete, label: 'Rejeté' },\r\n    { value: DevisStatutEnum.Expire, label: 'Expiré' },\r\n  ]\r\n  cols = [\r\n    {\r\n      header: 'REFERENCE',\r\n      field: 'reference',\r\n      type: 'text',\r\n    },\r\n    {\r\n      header: 'CLIENT',\r\n      field: 'client.displayName',\r\n      type: 'text',\r\n    },\r\n    {\r\n      header: 'EMISSION',\r\n      field: 'dateEmission',\r\n      type: 'date',\r\n      format: (date) => (date._i ? new Date(date._i) : new Date(date._d)),\r\n    },\r\n    /* Hidding Echeance\r\n    {\r\n      header: 'ECHEANCE',\r\n      field: 'echeancePaiement',\r\n      type: 'text',\r\n      suffix: 'jours',\r\n    },*/\r\n    {\r\n      header: 'MONTANT TTC',\r\n      field: 'montantTtc',\r\n      type: 'currency',\r\n    },\r\n    {\r\n      header: 'STATUT',\r\n      field: 'statut',\r\n      type: 'estimate-invoice-status-component',\r\n      format: this.formatStatut,\r\n    },\r\n  ]\r\n\r\n  devisStatusItems = [\r\n    {\r\n      actualStatus: DevisStatutEnum.Valide,\r\n      label: 'Convertir',\r\n      icon: 'pi pi-check',\r\n      command: () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Convert',\r\n          target: 'Estimate',\r\n        }\r\n      },\r\n    },\r\n    {\r\n      actualStatus: DevisStatutEnum.Valide,\r\n      label: 'Rejeter',\r\n      icon: 'pi pi-times',\r\n      command: () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Reject',\r\n          target: 'Estimate',\r\n        }\r\n      },\r\n    },\r\n    {\r\n      actualStatus: DevisStatutEnum.Cree,\r\n      label: 'Valider',\r\n      icon: 'pi pi-check',\r\n      command: () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Validate',\r\n          target: 'Estimate',\r\n        }\r\n      },\r\n    },\r\n  ]\r\n  displayDialog = false\r\n  dialogState!: DialogStatus\r\n  autoCompleteText = ''\r\n  suggestions = []\r\n  dateEmission = new Date()\r\n  echeancePayementOptions = [30, 60, 90]\r\n  echeancePayementSelected = this.echeancePayementOptions[0] || ''\r\n  selectedDevisItem!: any\r\n  summaryTotalHT = 0\r\n  summaryTVA = 0\r\n  summaryTotalTTC = 0\r\n  montantTotalAllDevis = 0\r\n\r\n  //#endregion\r\n\r\n  emitDateFilterEvent(event) {\r\n    if (this.selectedDate.every((x) => x != null))\r\n      this.emitFilterEvent('filterByButton', null)\r\n  }\r\n\r\n  formatStatut(statut?: DevisStatutEnum) {\r\n    switch (statut) {\r\n      case DevisStatutEnum.Cree:\r\n        return 'Brouillon'\r\n      case DevisStatutEnum.Valide:\r\n        return 'Validé'\r\n      case DevisStatutEnum.Converti:\r\n        return 'Convérti'\r\n      case DevisStatutEnum.Rejete:\r\n        return 'Rejeté'\r\n      case DevisStatutEnum.Expire:\r\n        return 'Expiré'\r\n      case DevisStatutEnum.Undefined:\r\n        return ' '\r\n    }\r\n  }\r\n\r\n  getDateEcheance(dateEmission: Date, echeance: number) {\r\n    return moment(dateEmission).add(echeance, 'days').toDate()\r\n  }\r\n\r\n  getUserName = () => this._sessionService.user.userName\r\n\r\n  clientAutoCompleteSearch(event: any) {\r\n    setTimeout(() => {\r\n      this._clientServiceProxy\r\n        .getClientForAutoComplete(event.query)\r\n        .subscribe((res: ClientForAutoCompleteDtoListResultDto) => {\r\n          this.clientSuggestions = res.items\r\n        })\r\n    }, 500)\r\n  }\r\n\r\n  resetFilterFields() {\r\n    this.selectedClient = null\r\n    this.selectedDate = null\r\n    this.selectedEcheance = null\r\n    this.selectedMontant = null\r\n    this.selectedStatut = null\r\n\r\n    this.emitFilterEvent('filterByButton', null)\r\n  }\r\n\r\n  filterSubject = new Subject<any>()\r\n  emitFilterEvent(filterType: string, value: any) {\r\n    if (filterType == 'filterByInput') {\r\n      setTimeout(() => {\r\n        this.filterSubject.next({\r\n          type: 'filterByInput',\r\n          value,\r\n        })\r\n      }, 500)\r\n    } else if (filterType == 'filterByButton') {\r\n      this.filterSubject.next({\r\n        type: 'filterByButton',\r\n        value: {\r\n          client: this.selectedClient && this.selectedClient.id,\r\n          dateEmission: this.selectedDate,\r\n          echeancePaiement: this.selectedEcheance,\r\n          statut: this.selectedStatut,\r\n          montantTtc: this.selectedMontant,\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  newDevis() {\r\n    this.displayDialog = true\r\n    this.devisItemProp = null\r\n    this.dialogStatus = DialogStatus.New\r\n  }\r\n\r\n  editDevis() {\r\n    this.displayDialog = true\r\n    this.devisItemProp = { ...this.selectedDevisItem }\r\n    this.dialogStatus = DialogStatus.Edit\r\n  }\r\n\r\n  duplicateDevis() {\r\n    this.displayDialog = true\r\n    this.devisItemProp = { ...this.selectedDevisItem }\r\n    this.dialogStatus = DialogStatus.Duplicate\r\n  }\r\n\r\n  deleteDevis() {\r\n    this._confirmDialogService.deleteConfirm({\r\n      acceptCallback: () => {\r\n        this._devisServiceProxy\r\n          .deleteDevis(this.selectedDevisItem.id)\r\n          .subscribe((res) => {\r\n            if (res) {\r\n              this._lazyTableService.emitDataOperation = {\r\n                action: 'remove',\r\n                payload: this.selectedDevisItem.id,\r\n              }\r\n              this.summaryTotalHT = 0\r\n              this.summaryTVA = 0\r\n              this.montantTotalAllDevis -= this.selectedDevisItem.montantTtc\r\n              this._toastService.info({\r\n                summary: 'Opération réussie',\r\n                detail: 'Le devis est supprimé avec succès',\r\n              })\r\n            }\r\n          })\r\n      },\r\n\r\n      rejectCallback: (type: any) => {\r\n        // switch (type) {\r\n        //   case ConfirmEventType.REJECT:\r\n        //     this._toastService.error({\r\n        //       summary: 'Erreur',\r\n        //       detail: \"Une erreur s'est produite lors de la suppression\",\r\n        //     })\r\n        //     break\r\n        //   case ConfirmEventType.CANCEL:\r\n        //     break\r\n        // }\r\n      },\r\n    })\r\n  }\r\n\r\n  onDialogClose() {\r\n    this.displayDialog = false\r\n    this.dialogStatus = undefined\r\n    document.body.style.overflow = 'auto'\r\n  }\r\n\r\n  calculateSummaryTotalHTAndTVA() {\r\n    if (this.selectedDevisItem && this.selectedDevisItem.devisItems) {\r\n      this.summaryTotalHT = this.selectedDevisItem.devisItems\r\n        .map((item) => item.unitPriceHT * item.quantity)\r\n        .reduce((accum, current) => accum + current)\r\n      this.summaryTVA = this.selectedDevisItem.devisItems\r\n        .map((item) => (item.unitPriceHT * item.quantity * item.tva) / 100)\r\n        .reduce((accum, current) => accum + current)\r\n\r\n      this.remiseAmount = this.calculateRemise(\r\n        this.selectedDevisItem.remise,\r\n        this.summaryTotalHT,\r\n      )\r\n    }\r\n  }\r\n\r\n  calculateRemise(remise, totalHT) {\r\n    return (totalHT * remise) / 100\r\n  }\r\n\r\n  crudOperationTreatment(event) {\r\n    let estimate: DevisDto = event.result\r\n    if (event.crudOperation == 'create') {\r\n      this._lazyTableService.emitDataOperation = {\r\n        action: 'add',\r\n        payload: estimate,\r\n      }\r\n      this.montantTotalAllDevis += estimate.montantTtc\r\n    } else if (event.crudOperation == 'update') {\r\n      this.montantTotalAllDevis +=\r\n        estimate.montantTtc - this.selectedDevisItem.montantTtc\r\n      this.selectedDevisItem = { ...estimate }\r\n\r\n      this.child.selectedDevisItem = { ...this.selectedDevisItem }\r\n      let index = this.tableChild.tableData.findIndex(\r\n        (item) => item.id == this.selectedDevisItem.id,\r\n      )\r\n      this.tableChild.tableData[index] = {\r\n        ...this.selectedDevisItem,\r\n        dateEmission: moment(this.selectedDevisItem.dateEmission),\r\n      }\r\n      this.tableChild.tableData = [...this.tableChild.tableData]\r\n    }\r\n\r\n    this.calculateSummaryTotalHTAndTVA()\r\n  }\r\n\r\n  //#region Api Calls\r\n  getListDevisApi$(event) {\r\n    let clientFilter,\r\n      dateEmissionFilter,\r\n      echeancePaiementFilter,\r\n      montantTtcFilter,\r\n      statutFilter\r\n    if (event.filters) {\r\n      clientFilter = event.filters.client && event.filters.client.value\r\n      dateEmissionFilter =\r\n        event.filters.dateEmission && event.filters.dateEmission.value\r\n      echeancePaiementFilter =\r\n        event.filters.echeancePaiement && event.filters.echeancePaiement.value\r\n      montantTtcFilter =\r\n        event.filters.montantTtc && event.filters.montantTtc.value\r\n      statutFilter = event.filters.statut && event.filters.statut.value\r\n    }\r\n\r\n    return zip(\r\n      this._devisServiceProxy.getAllDevisTotalRecords(\r\n        0,\r\n        0,\r\n        event.globalFilter,\r\n        '',\r\n        '',\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n      this._devisServiceProxy.getAllDevis(\r\n        event.first,\r\n        event.rows,\r\n        event.globalFilter,\r\n        event.sortField,\r\n        event.sortOrder,\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n      this._devisServiceProxy.getAllDevisMontantTotal(\r\n        event.first,\r\n        event.rows,\r\n        event.globalFilter,\r\n        '',\r\n        '',\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n    ).pipe(\r\n      map(([length, res, montantTotalAllDevis]: any) => {\r\n        let data = [...res.items]\r\n        data.forEach((devis: any) => {\r\n          devis.statut =\r\n            devis.statut == DevisStatutEnum.Valide &&\r\n            moment().isAfter(\r\n              moment(devis.dateEmission).add(devis.echeancePaiement, 'days'),\r\n            )\r\n              ? DevisStatutEnum.Expire\r\n              : devis.statut\r\n        })\r\n\r\n        return { items: data, length, montantTotalAllDevis }\r\n      }),\r\n    )\r\n  }\r\n\r\n  updateApiCall(devisId: number, devisStatut: DevisStatutEnum, detail) {\r\n    this._devisServiceProxy\r\n      .changeDevisStatut(devisId, devisStatut)\r\n      .subscribe((res) => {\r\n        if (res) {\r\n          this._toastService.info({ detail })\r\n          this.selectedDevisItem = {\r\n            ...this.selectedDevisItem,\r\n            statut: devisStatut,\r\n          }\r\n          this.tableChild.tableData.forEach((item) => {\r\n            item.id == this.selectedDevisItem.id && (item.statut = devisStatut)\r\n          })\r\n        }\r\n      })\r\n  }\r\n  //#endregion\r\n\r\n  //#region FactureDialog\r\n\r\n  dialogComponentShown = false\r\n\r\n  showFactureDialog() {\r\n    this.invoiceItemProp = {\r\n      ...this.selectedDevisItem,\r\n      factureItems: this.selectedDevisItem.devisItems,\r\n    }\r\n\r\n    delete this.invoiceItemProp['devisItems']\r\n\r\n    this.dialogComponentShown = true\r\n    this.invoiceDialogStatus = DialogStatus.Convert\r\n  }\r\n\r\n  //#endregion\r\n\r\n  print() {\r\n    this._previewService.print({\r\n      item: this.selectedDevisItem,\r\n      remiseAmount: this.remiseAmount,\r\n      summaryTVA: this.summaryTVA,\r\n      summaryTotalHT: this.summaryTotalHT,\r\n      title: 'Devis',\r\n      logoSrc: this.logoSrc\r\n    })\r\n  }\r\n  //TODO:Create a service for these two methods\r\n  isNullOrEmpty(str: string): boolean {\r\n    return str == undefined || str.toString().trim() == ''\r\n  }\r\n\r\n  replaceIfIsNullOrEmpty(str: string): string {\r\n    if (!str || this.isNullOrEmpty(str)) {\r\n      return '...'\r\n    } else {\r\n      return str\r\n    }\r\n  }\r\n\r\n  downloadAsPDF() {\r\n    this._previewService.download({\r\n      item: this.selectedDevisItem,\r\n      remiseAmount: this.remiseAmount,\r\n      summaryTVA: this.summaryTVA,\r\n      summaryTotalHT: this.summaryTotalHT,\r\n      title: 'Devis',\r\n      logoSrc: this.logoSrc\r\n    })\r\n  }\r\n\r\n}\r\n","<p-confirmDialog [style]=\"{width: '50vw'}\" [baseZIndex]=\"10000\" rejectButtonStyleClass=\"p-button-text\">\r\n</p-confirmDialog>\r\n<p-toast [style]=\"{marginTop: 'marginTop'}\" styleClass=\"styleClass\"></p-toast>\r\n\r\n<div class=\"main pt-5\">\r\n    <div class=\"grid  mx-0 \">\r\n        <div class=\"leftSection md:col-12 p-0 positon-relative\">\r\n            <div class=\"pl-3\">\r\n                <div class=\"header flex justify-content-between align-items-start\">\r\n                    <div class=\"flex  flex-wrap align-items-baseline\">\r\n                        <img [src]=\"imageSrc\" class=\"mr-3 h-100\" />\r\n                        <h1 class=\"title\" [ngClass]=\"'color-' + primaryColor\">{{title}}</h1>\r\n                    </div>\r\n\r\n                    <button pButton (click)=\"newDevis()\" class=\"btn-new-devis text-normal\" [ngClass]=\"'bg-' + primaryColor\" [label]=\"'Nouveau ' + title\"></button>\r\n\r\n                </div>\r\n                <p class=\"subtitle pt-2\">Visualisez, modifiez et gérez toutes vos {{title | lowercase}} !</p>\r\n\r\n                <span class=\"searchInput p-input-icon-left mt-2 shadow-1\">\r\n                    <i class=\"pi pi-search\"></i>\r\n                    <input pInputText [(ngModel)]=\"searchText\"\r\n                        (input)=\"emitFilterEvent('filterByInput', $event.target.value)\" class=\"\"\r\n                        placeholder=\"Rechercher ici\" />\r\n                </span>\r\n\r\n                <div class=\"flex align-items-center pt-4 filterContainer\">\r\n                    <p-autoComplete [(ngModel)]=\"selectedClient\" placeholder=\"Client\" [suggestions]=\"clientSuggestions\" (completeMethod)=\"clientAutoCompleteSearch($event)\" field=\"displayName\" (onSelect)=\"emitFilterEvent('filterByButton', null)\"></p-autoComplete>\r\n                    <p-calendar [(ngModel)]=\"selectedDate\" selectionMode=\"range\" placeholder=\"Date\" (onSelect)=\"emitDateFilterEvent($event)\"></p-calendar>\r\n                    <p-inputNumber [(ngModel)]=\"selectedEcheance\" placeholder=\"Echéance\" (onInput)=\"selectedEcheance = $event.value; emitFilterEvent('filterByButton', null)\">\r\n                    </p-inputNumber>\r\n                    <p-inputNumber [(ngModel)]=\"selectedMontant\" placeholder=\"Montant\" mode=\"decimal\" [minFractionDigits]=\"2\" (onInput)=\"selectedMontant = $event.value; emitFilterEvent('filterByButton', null)\">\r\n                    </p-inputNumber>\r\n                    <p-dropdown [options]=\"statutOptions\" [(ngModel)]=\"selectedStatut\" placeholder=\"Statut\" optionLabel=\"label\" optionValue=\"value\" [showClear]=\"false\" (onChange)=\"emitFilterEvent('filterByButton', null)\"></p-dropdown>\r\n\r\n                    <button pButton pRipple type=\"button\" icon=\"fa fa-undo\" (click)=\"resetFilterFields()\" [ngClass]=\"'p-button-rounded ml-2 bg-' + primaryColor \"></button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <app-table #dt1 [cols]=\"cols\" [styleClass]=\"'table'\" [styleId]=\"'devisList'\" [highlightColorInput]=\"tableSelectionColor\" [filterEvent]=\"filterSubject.asObservable()\" [getListApi$]=\"getListDevisApi$\" [statusItems]=\"devisStatusItems\" [globalFilterFields]=\"['reference','client','dateEmission','echeancePaiement', 'montantTtc','statut']\">\r\n            </app-table>\r\n\r\n            <div class=\"devisTotal flex justify-content-between align-items-center w-100\">\r\n                <span class=\"color-gray \">Total TTC</span>\r\n                <span class=\"color-gray\">{{montantTotalAllDevis | number:'1.2-2' }}\r\n                    {{' ' + (selectedDevisItem && selectedDevisItem.currency)}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"rightSection md:col-12 p-0\">\r\n            <div class=\"devis-details\">\r\n                <div class=\"header flex justify-content-end\">\r\n                    <div class=\"flex\">\r\n                        <button pButton label=\"Télécharger\" class=\"p-button-text\" (click)=\"downloadAsPDF()\"></button>\r\n                        <button pButton label=\"Imprimer\" class=\"p-button-text\" (click)=\"print()\"></button>\r\n                        <button pButton label=\"Dupliquer\" class=\"p-button-text\" (click)=\"duplicateDevis()\"></button>\r\n                        <button pButton label=\"Modifier\" class=\"p-button-text\" (click)=\"editDevis()\"></button>\r\n                        <button pButton label=\"Supprimer\" class=\"p-button-text\" (click)=\"deleteDevis()\"></button>\r\n                    </div>\r\n                </div>\r\n                <app-item-preview #prv [item]=\"selectedDevisItem\" [title]=\"title\" [logoSrc]=\"logoSrc\" [summaryTotalHT]=\"summaryTotalHT\" [summaryTVA]=\"summaryTVA\" [remiseAmount]=\"remiseAmount\">\r\n                </app-item-preview>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<app-devis-dialog #devisDialog [visible]=\"displayDialog\" (openDialogEvent)=\"displayDialog=true\" (closeDialogEvent)=\"onDialogClose()\" (crudOperationEvent)=\"crudOperationTreatment($event)\" (emitCheckFormIsValidEvent)=\"updateEstimateStatusToValid($event)\"\r\n    [dataItem]=\"devisItemProp\" [dialogStatus]=\"dialogStatus\">\r\n</app-devis-dialog>\r\n\r\n<app-factures-dialog #factureDialog [visible]=\"dialogComponentShown\" (closeDialogEvent)=\"dialogComponentShown=false\" [dataItem]=\"invoiceItemProp\" [dialogStatus]=\"invoiceDialogStatus\">\r\n</app-factures-dialog>","import { DevisComponent } from './devis.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PrimengSharedModule } from '@shared/primeng-shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild([\r\n      { path: '', component: DevisComponent}\r\n  ]),\r\n  PrimengSharedModule,\r\n\r\n  ],\r\n  declarations: [DevisComponent]\r\n})\r\nexport class DevisModule { }\r\n"],"sourceRoot":"webpack:///"}