{"version":3,"sources":["./src/app/factures/factures.module.ts","./src/app/factures/facture-payement/facture-payement.component.ts","./src/app/factures/facture-payement/facture-payement.component.html","./src/app/factures/facture-payement/payment-history/payment-history.component.ts","./src/app/factures/facture-payement/payment-history/payment-history.component.html","./src/app/factures/factures.component.ts","./src/app/factures/factures.component.html"],"names":[],"mappings":"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","file":"factures-factures-module.js","sourcesContent":["import { FacturesComponent } from './factures.component';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientJsonpModule } from '@angular/common/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { ServiceProxyModule } from '@shared/service-proxies/service-proxy.module';\r\nimport { SharedModule } from '@shared/shared.module';\r\n\r\nimport {InputTextModule} from 'primeng/inputtext';\r\nimport {ButtonModule} from 'primeng/button';\r\nimport {DropdownModule} from 'primeng/dropdown';\r\nimport {TableModule} from 'primeng/table';\r\nimport {TabViewModule} from 'primeng/tabview';\r\nimport {DialogModule} from 'primeng/dialog';\r\nimport {SelectButtonModule} from 'primeng/selectbutton';\r\nimport {KeyFilterModule} from 'primeng/keyfilter';\r\nimport {InputNumberModule} from 'primeng/inputnumber';\r\nimport {ToastModule} from 'primeng/toast';\r\nimport {ConfirmDialogModule} from 'primeng/confirmdialog';\r\nimport {AccordionModule} from 'primeng/accordion';\r\nimport {SplitButtonModule} from 'primeng/splitbutton';\r\nimport {AutoCompleteModule} from 'primeng/autocomplete';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { ToggleButtonModule } from 'primeng/togglebutton';\r\nimport {SkeletonModule} from 'primeng/skeleton';\r\n\r\nimport { TableComponent } from '../table/table.component';\r\nimport { ToastService } from '@shared/services/toast.service';\r\nimport { ConfirmDialogService } from '@shared/services/confirm-dialog.service';\r\nimport {DynamicDialogModule} from 'primeng/dynamicdialog';\r\nimport { DevisDialogComponent } from '@app/devis/devis-dialog/devis-dialog.component';\r\nimport { FacturePayementComponent } from '@app/factures/facture-payement/facture-payement.component';\r\nimport { FacturesDialogComponent } from '@app/factures/factures-dialog/factures-dialog.component';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PrimengSharedModule } from '@shared/primeng-shared.module';\r\nimport { PaymentHistoryComponent } from './facture-payement/payment-history/payment-history.component'\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild([\r\n      { path: '', component: FacturesComponent}\r\n  ]),\r\n  PrimengSharedModule\r\n  ],\r\n  declarations: [FacturesComponent, FacturePayementComponent, PaymentHistoryComponent]\r\n})\r\nexport class FacturesModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ReferencePrefix } from '@shared/enums/reference-prefix.enum';\r\nimport { FactureServiceProxy, ModePaiementEnum } from '@shared/service-proxies/service-proxies';\r\nimport { FormatService } from '@shared/services/format.service';\r\nimport * as moment from 'moment';\r\nimport { DynamicDialogConfig, DynamicDialogRef } from 'primeng/dynamicdialog';\r\n\r\n@Component({\r\n  selector: 'app-facture-payement',\r\n  templateUrl: './facture-payement.component.html',\r\n  styleUrls: ['./facture-payement.component.css']\r\n})\r\nexport class FacturePayementComponent implements OnInit {\r\n\r\n  constructor(\r\n    public ref: DynamicDialogRef,\r\n    public config: DynamicDialogConfig,\r\n    private _formBuider: FormBuilder,\r\n    private _formatService: FormatService,\r\n  )\r\n   { }\r\n\r\n   formGroup: FormGroup \r\n   payementOptions = [\r\n     { value: ModePaiementEnum.Cheque, label: 'Chèque' },\r\n     { value: ModePaiementEnum.Effet, label: 'Effet' },\r\n     { value: ModePaiementEnum.Liquide, label: 'Liquide' },\r\n     { value: ModePaiementEnum.Virement, label: 'Virement' },\r\n   ]\r\n\r\n   currency = 'MAD'\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.initiateForm();\r\n    this.currency = this.config.data.currency\r\n  }\r\n\r\n  initiateForm(){\r\n    return this.formGroup = this._formBuider.group({\r\n      datePaiement: [moment().toDate(), Validators.required],\r\n      montant: [0, Validators.required],\r\n      modePaiement: [ModePaiementEnum.Cheque],\r\n      reference: ['']\r\n    })\r\n  }\r\n\r\n  closeDialogAndGetValue(){\r\n    if(this.formGroup.valid){\r\n      this.dateIsSelected && this.formGroup.get('datePaiement').setValue(moment(this.formGroup.get('datePaiement').value)\r\n        .add(1, 'days').toDate())\r\n      this.ref.close(this.formGroup.value)\r\n    }\r\n  }\r\n\r\n  closeDialog(){\r\n     this.ref.close()\r\n  }\r\n\r\n  dateIsSelected = false\r\n  selectDate(){\r\n    this.dateIsSelected = true\r\n  }\r\n}\r\n","<div #container>\r\n    <div class=\"custom-dialog-header\">\r\n        <span class=\"custom-dialog-title\">Paiement du facture</span>\r\n        <div class=\"p-dialog-header-icons\">\r\n            <button type=\"button\" (click)=\"closeDialog()\" class=\"p-dialog-header-icon p-dialog-header-maximize p-link \">\r\n                <span class=\"p-dialog-header-close-icon pi pi-times ng-tns-c139-15\"></span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <p-tabView>\r\n        <p-tabPanel header=\"Ajouter un payement\" *ngIf=\"this.config.data.tabPanelShowMode == 'both' || this.config.data.tabPanelShowMode == 'addPayement'\">\r\n            <form [formGroup]=\"formGroup\" class=\"mt-1\">\r\n                <div *ngIf=\"this.config.data.status == 2\" class=\"flex justify-content-center align-items-center \">\r\n                    <span class=\"mr-1 text-xl font-bold text-black\">Reste à payer:</span>\r\n                    <span class=\"ml-1 text-3xl font-bold color-orange\">{{this.config.data.restAmount | number:'1.2-2' }}\r\n                        {{currency | uppercase}}</span>\r\n                </div>\r\n                <div class=\"flex justify-content-between mt-4 align-items-center\">\r\n                    <span>Montant</span>\r\n                    <p-inputNumber formControlName=\"montant\" mode=\"decimal\" [minFractionDigits]=\"2\" placeholder=\"\">\r\n                    </p-inputNumber>\r\n                </div>\r\n                <div class=\"flex justify-content-between mt-3 align-items-center\">\r\n                    <span>Date de paiement</span>\r\n                    <p-calendar formControlName=\"datePaiement\" [appendTo]=\"container\" dateFormat=\"dd/mm/yy\" (onSelect)=\"selectDate($event)\"></p-calendar>\r\n                </div>\r\n                <div class=\"flex justify-content-between mt-3 align-items-center\">\r\n                    <span>Mode de paiement</span>\r\n                    <p-dropdown formControlName=\"modePaiement\" [appendTo]=\"container\" [options]=\"payementOptions\" optionLabel=\"label\" optionValue=\"value\"></p-dropdown>\r\n                </div>\r\n                <div class=\"flex mt-4\">\r\n                    <a pButton pRipple (click)=\"closeDialogAndGetValue()\" class=\"ml-auto \">Términer</a>\r\n                </div>\r\n\r\n            </form>\r\n        </p-tabPanel>\r\n        <p-tabPanel header=\"Voir tous les payaments\" *ngIf=\"this.config.data.tabPanelShowMode == 'both' || this.config.data.tabPanelShowMode == 'historic'\">\r\n            <app-payment-history [factureId]=\"this.config.data.factureId\" [currency]=\"currency\"></app-payment-history>\r\n\r\n        </p-tabPanel>\r\n    </p-tabView>\r\n</div>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { FactureServiceProxy } from '@shared/service-proxies/service-proxies';\r\nimport { FormatService } from '@shared/services/format.service';\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-payment-history',\r\n  templateUrl: './payment-history.component.html',\r\n  styleUrls: ['./payment-history.component.scss']\r\n})\r\nexport class PaymentHistoryComponent implements OnInit {\r\n  \r\n  constructor(\r\n    private _factureServiceProxy: FactureServiceProxy,\r\n    private _formatService: FormatService,\r\n  ) { }\r\n\r\n\r\n  @Input() currency = 'MAD'\r\n  @Input() factureId: number;\r\n  paymentHistoryItems: any\r\n  totalRecords\r\n\r\n  ngOnInit() { \r\n\r\n  }\r\n\r\n  loadPaymentHistoryItemsLazy(event){\r\n    !event.first && (event.fisrt = 0)\r\n    !event.rows && (event.rows = 4)\r\n    this._factureServiceProxy.getByFactureIdFactureInfosPaiement(this.factureId, event.first, event.rows).subscribe(res => {\r\n      this.paymentHistoryItems = [...res.items]\r\n      this.totalRecords = res.totalEntityItems\r\n\r\n    })\r\n  }\r\n\r\n  formatPaymentMethod(paymentMethod){\r\n    return this._formatService.formatPaymentMethod(paymentMethod)\r\n  }\r\n \r\n}\r\n","<p-dataView #dv [value]=\"paymentHistoryItems\" [paginator]=\"true\" [rows]=\"4\" [lazy]=\"true\" (onLazyLoad)=\"loadPaymentHistoryItemsLazy($event)\" [totalRecords]=\"totalRecords\">\r\n    <ng-template let-payment pTemplate=\"listItem\">\r\n        <div class=\"payment-history border-round flex justify-content-between mb-2\">\r\n            <div class=\"\">\r\n                <h5 class=\"block mb-0\">{{payment.datePaiement.toDate() | date:'shortDate'}}</h5>\r\n                <span class=\"block\">Payé par {{formatPaymentMethod(payment.modePaiement)}}</span>\r\n            </div>\r\n            <div class=\"align-self-center\">\r\n                <h5 class=\"block\">{{payment.montantPaye | number:'1.2-2' }} {{currency | uppercase}}</h5>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n</p-dataView>","import {\r\n  AfterViewInit,\r\n  Component,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core'\r\nimport { Subject, zip } from 'rxjs'\r\nimport { DialogStatus } from '../../shared/enums/DialogState.enum'\r\nimport { GlobalEventsService } from '@shared/globalEventsService'\r\nimport {\r\n  ClientForAutoCompleteDto,\r\n  ClientForAutoCompleteDtoListResultDto,\r\n  ClientServiceProxy,\r\n  FactureServiceProxy,\r\n  FactureInfosPaiementDto,\r\n  ModePaiementEnum,\r\n  FactureStatutEnum,\r\n  FileApiServiceProxy,\r\n  FactureItemDto,\r\n  FactureDto,\r\n} from '@shared/service-proxies/service-proxies'\r\nimport * as moment from 'moment'\r\nimport { DateHelper } from '@shared/helpers/DateHelper'\r\nimport { ToastService } from '@shared/services/toast.service'\r\nimport { Moment } from 'moment'\r\nimport { FacturesDialogComponent } from './factures-dialog/factures-dialog.component'\r\nimport { ConfirmDialogService } from '@shared/services/confirm-dialog.service'\r\nimport { ConfirmEventType, LazyLoadEvent } from 'primeng/api'\r\nimport { map } from 'rxjs/operators'\r\nimport { TableComponent } from '@app/table/table.component'\r\nimport { DialogService, DynamicDialogRef } from 'primeng/dynamicdialog'\r\nimport { FacturePayementComponent } from './facture-payement/facture-payement.component'\r\nimport * as printJS from 'print-js'\r\nimport { DomSanitizer } from '@angular/platform-browser'\r\nimport { ItemPreviewComponent } from '@shared/components/item-preview/item-preview.component'\r\nimport html2canvas from 'html2canvas'\r\nimport jsPDF from 'jspdf'\r\nimport { EstimateInvoiceStatusStateService } from '@shared/services/estimate-invoice-status-state.service'\r\nimport { LazyTableService } from '@shared/services/lazy-table.service'\r\nimport { PreviewService } from '@shared/services/preview.service'\r\n\r\n@Component({\r\n  selector: 'app-factures',\r\n  templateUrl: './factures.component.html',\r\n  styleUrls: ['./factures.component.css'],\r\n  providers: [DialogService, EstimateInvoiceStatusStateService],\r\n})\r\nexport class FacturesComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  remiseAmount: number\r\n  favIcon: HTMLLinkElement = document.querySelector('#favIcon')\r\n  logoSrc: string\r\n  invoiceDialogStatus: DialogStatus\r\n  invoiceItemProp: any\r\n  firstLoad = true\r\n\r\n  constructor(\r\n    private _factureServiceProxy: FactureServiceProxy,\r\n    private _clientServiceProxy: ClientServiceProxy,\r\n    private _toastService: ToastService,\r\n    private _confirmDialogService: ConfirmDialogService,\r\n    public globalEventsService: GlobalEventsService,\r\n    public dialogService: DialogService,\r\n    private _fileApiServiceProxy: FileApiServiceProxy,\r\n    private _estimateInvoiceStatusStateService: EstimateInvoiceStatusStateService,\r\n    private _sanitizer: DomSanitizer,\r\n    private _lazyTableService: LazyTableService,\r\n    private _previewService: PreviewService,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.globalEventsService.announcedThePageChangedColorSubject(\r\n      `var(--${this.primaryColor}-color`,\r\n    )\r\n\r\n    this.favIcon.href = 'assets/img/FacturesLogo.png'\r\n\r\n    this._fileApiServiceProxy.download().subscribe((res) => {\r\n      let objectURL = this._sanitizer.bypassSecurityTrustUrl(\r\n        URL.createObjectURL(res.data),\r\n      )\r\n      this.logoSrc = objectURL as string\r\n    })\r\n\r\n    this._lazyTableService.rowSelected$.subscribe((res) => {\r\n      this.firstLoad && (this.montantTotalAllDevis = this.tableChild.montantTotal)\r\n      this.selectedDevisItem = res\r\n      this.calculateSummaryTotalHTAndTVA()\r\n      this.firstLoad = false\r\n\r\n    })\r\n  }\r\n\r\n  updateInvoiceStatusToValid = (data) => {\r\n    if (data) {\r\n      this.updateApiCall(\r\n        this.selectedDevisItem.id,\r\n        this.parseStatutForStatutValide(this.selectedDevisItem),\r\n        'Le devis est validé',\r\n      )\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._estimateInvoiceStatusStateService.statusModifier$.subscribe(\r\n      async (res) => {\r\n        if (res.target == 'Invoice') {\r\n          switch (res.statusAction) {\r\n            case 'Validate':\r\n              this.invoiceDialogStatus = DialogStatus.CheckFormValidity\r\n              this.invoiceItemProp = { ...this.selectedDevisItem }\r\n              break\r\n\r\n            case 'Settle':\r\n              await this.showFacturePayementDialog('addPayement')\r\n              break\r\n\r\n            case 'PartiallySettle':\r\n              await this.showFacturePayementDialog('both')\r\n              break\r\n\r\n            case 'Historic':\r\n              await this.showFacturePayementDialog('historic')\r\n          }\r\n\r\n          document.body.style.overflow = 'auto'\r\n        }\r\n      },\r\n    )\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.ref) this.ref.close()\r\n  }\r\n\r\n  //#region Properties\r\n  @ViewChild(FacturesDialogComponent, { static: false })\r\n  child: FacturesDialogComponent\r\n  @ViewChild(TableComponent, { static: false }) tableChild: TableComponent\r\n  @ViewChild('prv', { static: true }) template: ItemPreviewComponent\r\n  title = 'Facture'\r\n  imageSrc = 'assets/img/FacturesLogo.png'\r\n  primaryColor = 'orange'\r\n  secondaryColor = ''\r\n  tableSelectionColor = 'var(--light-orange-color)'\r\n  searchText = ''\r\n  selectedClient: any\r\n  selectedDate: Moment[]\r\n  selectedEcheance: number\r\n  selectedMontant: number\r\n  selectedStatut: FactureStatutEnum\r\n  clientSuggestions: ClientForAutoCompleteDto[]\r\n  echeanceOptions = [15, 20, 30]\r\n  statutOptions = [\r\n    { value: FactureStatutEnum.Cree, label: 'Créé' },\r\n    { value: FactureStatutEnum.Regle, label: 'Réglé' },\r\n    { value: FactureStatutEnum.ReglePartiellemt, label: 'Réglé Partiellement' },\r\n    { value: FactureStatutEnum.PaiementAttente, label: 'Paiement en attente' },\r\n    { value: FactureStatutEnum.PaiementRetard, label: 'Paiement en retard' },\r\n  ]\r\n  cols = [\r\n    {\r\n      header: 'REFERENCE',\r\n      field: 'reference',\r\n      type: 'text',\r\n    },\r\n    {\r\n      header: 'CLIENT',\r\n      field: 'client.displayName',\r\n      type: 'text',\r\n    },\r\n    {\r\n      header: 'EMISSION',\r\n      field: 'dateEmission',\r\n      type: 'date',\r\n      format: (date) => (date._i ? new Date(date._i) : new Date(date._d)),\r\n      colspan: 2,\r\n    },\r\n    /* Hidding Echeance\r\n    {\r\n      header: 'ECHEANCE',\r\n      field: 'echeancePaiement',\r\n      type: 'text',\r\n      suffix: 'jours',\r\n    },*/\r\n    {\r\n      header: 'MONTANT TTC',\r\n      field: 'montantTtc',\r\n      type: 'currency',\r\n    },\r\n    {\r\n      header: 'STATUT',\r\n      field: 'statut',\r\n      type: 'estimate-invoice-status-component',\r\n      format: this.formatStatut,\r\n      colspan: 2,\r\n    },\r\n  ]\r\n\r\n  factureStatusItems = [\r\n    {\r\n      actualStatus: FactureStatutEnum.ReglePartiellemt,\r\n      label: 'Ajouter un paiement',\r\n      icon: 'pi pi-check',\r\n      command: async () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'PartiallySettle',\r\n          target: 'Invoice',\r\n        }\r\n      },\r\n    },\r\n    {\r\n      actualStatus: FactureStatutEnum.PaiementAttente,\r\n      label: 'Régler',\r\n      icon: 'pi pi-check',\r\n      command: async () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Settle',\r\n          target: 'Invoice',\r\n        }\r\n      },\r\n    },\r\n\r\n    {\r\n      actualStatus: FactureStatutEnum.PaiementRetard,\r\n      label: 'Régler',\r\n      icon: 'pi pi-check',\r\n      command: async () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Settle',\r\n          target: 'Invoice',\r\n        }\r\n      },\r\n    },\r\n\r\n    {\r\n      actualStatus: FactureStatutEnum.Cree,\r\n      label: 'Valider',\r\n      icon: 'pi pi-check',\r\n      command: () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Validate',\r\n          target: 'Invoice',\r\n        }\r\n      },\r\n    },\r\n    {\r\n      actualStatus: FactureStatutEnum.Regle,\r\n      label: \"Voir l'historique\",\r\n      icon: 'pi pi-check',\r\n      command: async () => {\r\n        this._estimateInvoiceStatusStateService.statusModifier = {\r\n          statusAction: 'Historic',\r\n          target: 'Invoice',\r\n        }\r\n      },\r\n    },\r\n  ]\r\n\r\n  displayDialog = false\r\n  dialogState!: DialogStatus\r\n  autoCompleteText = ''\r\n  suggestions = []\r\n  dateEmission = new Date()\r\n  echeancePayementOptions = [30, 60, 90]\r\n  echeancePayementSelected = this.echeancePayementOptions[0] || ''\r\n  selectedDevisItem!: any\r\n  summaryTotalHT = 0\r\n  summaryTVA = 0\r\n  summaryTotalTTC = 0\r\n  montantTotalAllDevis\r\n  ref: DynamicDialogRef\r\n\r\n  //#endregion\r\n\r\n  emitDateFilterEvent(event) {\r\n    if (this.selectedDate.every((x) => x != null))\r\n      this.emitFilterEvent('filterByButton', null)\r\n  }\r\n\r\n  formatStatut(statut?: FactureStatutEnum) {\r\n    switch (statut) {\r\n      case FactureStatutEnum.Cree:\r\n        return 'Brouillon'\r\n      case FactureStatutEnum.Valide:\r\n        return 'Validé'\r\n      case FactureStatutEnum.Regle:\r\n        return 'Réglé'\r\n      case FactureStatutEnum.ReglePartiellemt:\r\n        return 'Réglé Partiellement'\r\n      case FactureStatutEnum.PaiementAttente:\r\n        return 'Paiement en attente'\r\n      case FactureStatutEnum.PaiementRetard:\r\n        return 'Paiement en retard'\r\n      default:\r\n        return ' '\r\n    }\r\n  }\r\n\r\n  getDateEcheance(dateEmission: Date, echeance: number) {\r\n    return moment(dateEmission).add(echeance, 'days').toDate()\r\n  }\r\n\r\n  clientAutoCompleteSearch(event: any) {\r\n    setTimeout(() => {\r\n      this._clientServiceProxy\r\n        .getClientForAutoComplete(event.query)\r\n        .subscribe((res: ClientForAutoCompleteDtoListResultDto) => {\r\n          this.clientSuggestions = res.items\r\n        })\r\n    }, 500)\r\n  }\r\n\r\n  filterSubject = new Subject<any>()\r\n  emitFilterEvent(filterType: string, value: any) {\r\n    if (filterType == 'filterByInput') {\r\n      setTimeout(() => {\r\n        this.filterSubject.next({\r\n          type: 'filterByInput',\r\n          value,\r\n        })\r\n      }, 500)\r\n    } else if (filterType == 'filterByButton') {\r\n      this.filterSubject.next({\r\n        type: 'filterByButton',\r\n        value: {\r\n          client: this.selectedClient && this.selectedClient.id,\r\n          dateEmission: this.selectedDate,\r\n          echeancePaiement: this.selectedEcheance,\r\n          statut: this.selectedStatut,\r\n          montantTtc: this.selectedMontant,\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  resetFilterFields() {\r\n    this.selectedClient = null\r\n    this.selectedDate = null\r\n    this.selectedEcheance = null\r\n    this.selectedMontant = null\r\n    this.selectedStatut = null\r\n    this.emitFilterEvent('filterByButton', null)\r\n  }\r\n\r\n  newDevis() {\r\n    this.displayDialog = true\r\n    this.invoiceItemProp = null\r\n    this.invoiceDialogStatus = DialogStatus.New\r\n  }\r\n\r\n  editDevis() {\r\n    this.displayDialog = true\r\n    this.invoiceItemProp = { ...this.selectedDevisItem }\r\n    this.invoiceDialogStatus = DialogStatus.Edit\r\n  }\r\n\r\n  duplicateDevis() {\r\n    this.displayDialog = true\r\n    this.invoiceItemProp = { ...this.selectedDevisItem }\r\n    this.invoiceDialogStatus = DialogStatus.Duplicate\r\n  }\r\n\r\n  deleteDevis() {\r\n    this._confirmDialogService.deleteConfirm({\r\n      acceptCallback: () => {\r\n        this._factureServiceProxy\r\n          .deleteFacture(this.selectedDevisItem.id)\r\n          .subscribe((res) => {\r\n            if (res) {\r\n              this._lazyTableService.emitDataOperation = {\r\n                action: 'remove',\r\n                payload: this.selectedDevisItem.id,\r\n              }\r\n              this.montantTotalAllDevis -= this.selectedDevisItem.montantTtc\r\n              this.summaryTotalHT = 0\r\n              this.summaryTVA = 0\r\n              this._toastService.info({\r\n                summary: 'Opération réussie',\r\n                detail: 'La facture est supprimée avec succès',\r\n              })\r\n            }\r\n          })\r\n      },\r\n\r\n      rejectCallback: (type: any) => {\r\n        switch (type) {\r\n          case ConfirmEventType.REJECT:\r\n            this._toastService.error({\r\n              summary: 'Erreur',\r\n              detail: \"Une erreur s'est produite lors de la suppression\",\r\n            })\r\n            break\r\n          case ConfirmEventType.CANCEL:\r\n            break\r\n        }\r\n      },\r\n    })\r\n  }\r\n\r\n  onDialogClose() {\r\n    this.displayDialog = false\r\n    this.invoiceDialogStatus = undefined\r\n\r\n    document.body.style.overflow = 'auto'\r\n  }\r\n\r\n  calculateSummaryTotalHTAndTVA() {\r\n    if (this.selectedDevisItem && this.selectedDevisItem.factureItems) {\r\n      this.summaryTotalHT = this.selectedDevisItem.factureItems\r\n        .map((item) => item.unitPriceHT * item.quantity)\r\n        .reduce((accum, current) => accum + current)\r\n      this.summaryTVA = this.selectedDevisItem.factureItems\r\n        .map((item) => (item.unitPriceHT * item.quantity * item.tva) / 100)\r\n        .reduce((accum, current) => accum + current)\r\n      this.remiseAmount = this.calculateRemise(\r\n        this.selectedDevisItem.remise,\r\n        this.summaryTotalHT,\r\n      )\r\n    }\r\n  }\r\n\r\n  calculateRemise(remise, totalHT) {\r\n    return (totalHT * remise) / 100\r\n  }\r\n\r\n  crudOperationTreatment(event) {\r\n    let invoice: FactureDto = event.result\r\n    invoice.statut =\r\n    invoice.statut == FactureStatutEnum.Valide\r\n        ? this.parseStatutForStatutValide(event)\r\n        : invoice.statut\r\n\r\n    if (event.crudOperation == 'create') {\r\n      this._lazyTableService.emitDataOperation = {\r\n        action: 'add',\r\n        payload: invoice,\r\n      }\r\n      this.montantTotalAllDevis += invoice.montantTtc\r\n    } else if (event.crudOperation == 'update') {\r\n      this.montantTotalAllDevis +=\r\n        invoice.montantTtc - this.selectedDevisItem.montantTtc\r\n      this.selectedDevisItem = invoice\r\n      this.child.selectedDevisItem = { ...this.selectedDevisItem }\r\n      let index = this.tableChild.tableData.findIndex(\r\n        (item) => item.id == this.selectedDevisItem.id,\r\n      )\r\n      this.tableChild.tableData[index] = {\r\n        ...this.selectedDevisItem,\r\n        dateEmission: moment(this.selectedDevisItem.dateEmission),\r\n      }\r\n      this.tableChild.tableData = [...this.tableChild.tableData]\r\n    }\r\n\r\n    this.calculateSummaryTotalHTAndTVA()\r\n  }\r\n\r\n  //#region Api Calls\r\n  getListDevisApi$(event) {\r\n    let clientFilter,\r\n      dateEmissionFilter,\r\n      echeancePaiementFilter,\r\n      montantTtcFilter,\r\n      statutFilter\r\n    if (event.filters) {\r\n      clientFilter = event.filters.client && event.filters.client.value\r\n      dateEmissionFilter =\r\n        event.filters.dateEmission && event.filters.dateEmission.value\r\n      echeancePaiementFilter =\r\n        event.filters.echeancePaiement && event.filters.echeancePaiement.value\r\n      montantTtcFilter =\r\n        event.filters.montantTtc && event.filters.montantTtc.value\r\n      statutFilter = event.filters.statut && event.filters.statut.value\r\n    }\r\n\r\n    return zip(\r\n      this._factureServiceProxy.getAllFactureTotalRecords(\r\n        0,\r\n        0,\r\n        event.globalFilter,\r\n        '',\r\n        '',\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n      this._factureServiceProxy.getAllFacture(\r\n        event.first,\r\n        event.rows,\r\n        event.globalFilter,\r\n        event.sortField,\r\n        event.sortOrder,\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n      this._factureServiceProxy.getAllFactureMontantTotal(\r\n        event.first,\r\n        event.rows,\r\n        event.globalFilter,\r\n        '',\r\n        '',\r\n        clientFilter,\r\n        dateEmissionFilter,\r\n        echeancePaiementFilter,\r\n        montantTtcFilter,\r\n        statutFilter,\r\n      ),\r\n    ).pipe(\r\n      map(([length, res, montantTotalAllDevis]: any) => {\r\n        let data = [...res.items]\r\n        data.forEach((devis: any) => {\r\n          devis.statut =\r\n            devis.statut == FactureStatutEnum.Valide\r\n              ? moment().isAfter(\r\n                  moment(devis.dateEmission).add(\r\n                    devis.echeancePaiement,\r\n                    'days',\r\n                  ),\r\n                )\r\n                ? FactureStatutEnum.PaiementRetard\r\n                : FactureStatutEnum.PaiementAttente\r\n              : devis.statut\r\n        })\r\n        return { items: data, length, montantTotalAllDevis }\r\n      }),\r\n    )\r\n  }\r\n\r\n  updateApiCall(devisId: number, devisStatut: FactureStatutEnum, detail) {\r\n    this._factureServiceProxy\r\n      .changeFactureStatut(devisId, devisStatut)\r\n      .subscribe((res) => {\r\n        if (res) {\r\n          this._toastService.info({ detail })\r\n          this.selectedDevisItem = {\r\n            ...this.selectedDevisItem,\r\n            statut: devisStatut,\r\n          }\r\n          this.tableChild.tableData.forEach((item) => {\r\n            item.id == this.selectedDevisItem.id && (item.statut = devisStatut)\r\n          })\r\n        }\r\n        //Update list\r\n      })\r\n  }\r\n  //#endregion\r\n\r\n  getSelectedItemMontantTtc() {\r\n    return (\r\n      this.selectedDevisItem.factureItems\r\n        .map((item) => item.totalTtc)\r\n        .reduce((accum, current) => accum + current) -\r\n      this.selectedDevisItem.remise\r\n    )\r\n  }\r\n\r\n  async showFacturePayementDialog(\r\n    tabPanelShowMode: 'both' | 'addPayement' | 'historic',\r\n  ) {\r\n    let facturePayementInfo: FactureInfosPaiementDto = new FactureInfosPaiementDto(\r\n      {\r\n        factureId: this.selectedDevisItem.id,\r\n        id: 0,\r\n        montantPaye: 0,\r\n        datePaiement: moment(),\r\n        modePaiement: ModePaiementEnum.Cheque,\r\n      },\r\n    )\r\n\r\n    let totalPayments = await this._factureServiceProxy\r\n      .getRestOfAmount(this.selectedDevisItem.id)\r\n      .toPromise()\r\n    let restAmount = this.selectedDevisItem.montantTtc - totalPayments\r\n\r\n    this.ref = this.dialogService.open(FacturePayementComponent, {\r\n      data: {\r\n        factureId: this.selectedDevisItem.id,\r\n        status: this.selectedDevisItem.statut,\r\n        restAmount: restAmount,\r\n        currency: this.selectedDevisItem.currency,\r\n        tabPanelShowMode: tabPanelShowMode,\r\n      },\r\n      header: 'Réler le payement',\r\n      width: '34vw',\r\n      showHeader: false,\r\n      contentStyle: {\r\n        height: '31.56rem',\r\n\r\n        overflow: 'auto',\r\n        padding: '0',\r\n        borderRadius: '20px',\r\n      },\r\n      baseZIndex: 10000,\r\n    })\r\n\r\n    this.ref.onClose.subscribe(async (result) => {\r\n      if (result && result.montant != 0) {\r\n        let factureInfosPaiementDto = new FactureInfosPaiementDto({\r\n          datePaiement:  moment(result.datePaiement),\r\n          montantPaye: result.montant,\r\n          modePaiement: result.modePaiement,\r\n          factureId: this.selectedDevisItem.id,\r\n          id: facturePayementInfo.id,\r\n        })\r\n\r\n        let payedAmount = 0\r\n        if (\r\n          this.selectedDevisItem.statut == FactureStatutEnum.ReglePartiellemt\r\n        ) {\r\n          payedAmount = totalPayments + result.montant\r\n        } else {\r\n          payedAmount = result.montant\r\n        }\r\n\r\n        if (payedAmount.toFixed(2) == this.selectedDevisItem.montantTtc) {\r\n          this._factureServiceProxy\r\n            .createOrUpdateFactureInfosPaiement(factureInfosPaiementDto)\r\n            .subscribe((res) => {\r\n              if (res) {\r\n                this._toastService.info({ detail: 'La facture est réglée' })\r\n                this._factureServiceProxy\r\n                  .changeFactureStatut(\r\n                    this.selectedDevisItem.id,\r\n                    FactureStatutEnum.Regle,\r\n                  )\r\n                  .subscribe((res) => {\r\n                    if (res) {\r\n                      this.viewUpdateSelectedItemStatut(FactureStatutEnum.Regle)\r\n                    }\r\n                  })\r\n              }\r\n            })\r\n        } else if (\r\n          payedAmount.toFixed(2) <= this.selectedDevisItem.montantTtc\r\n        ) {\r\n          this._factureServiceProxy\r\n            .createOrUpdateFactureInfosPaiement(factureInfosPaiementDto)\r\n            .subscribe((res) => {\r\n              if (res) {\r\n                this._toastService.info({\r\n                  detail: 'La facture est partiellement réglée',\r\n                })\r\n\r\n                this._factureServiceProxy\r\n                  .changeFactureStatut(\r\n                    this.selectedDevisItem.id,\r\n                    FactureStatutEnum.ReglePartiellemt,\r\n                  )\r\n                  .subscribe((res) => {\r\n                    if (res) {\r\n                      this.viewUpdateSelectedItemStatut(\r\n                        FactureStatutEnum.ReglePartiellemt,\r\n                      )\r\n                    }\r\n                  })\r\n              }\r\n            })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  print() {\r\n    this._previewService.print({\r\n      item: this.selectedDevisItem,\r\n      remiseAmount: this.remiseAmount,\r\n      summaryTVA: this.summaryTVA,\r\n      summaryTotalHT: this.summaryTotalHT,\r\n      title: 'Facture',\r\n      logoSrc: this.logoSrc\r\n    })\r\n  }\r\n\r\n  downloadAsPDF() {\r\n    this._previewService.download({\r\n      item: this.selectedDevisItem,\r\n      remiseAmount: this.remiseAmount,\r\n      summaryTVA: this.summaryTVA,\r\n      summaryTotalHT: this.summaryTotalHT,\r\n      title: 'Facture',\r\n      logoSrc: this.logoSrc\r\n    })\r\n  }\r\n\r\n  viewUpdateSelectedItemStatut(statut: any) {\r\n    this.selectedDevisItem = {\r\n      ...this.selectedDevisItem,\r\n      dateEmission: moment(this.selectedDevisItem.dateEmission),\r\n      statut: statut,\r\n    }\r\n    let index = this.tableChild.tableData\r\n      .filter((item) => item)\r\n      .findIndex((item) => item.id == this.selectedDevisItem.id)\r\n    this.tableChild.tableData[index] = { ...this.selectedDevisItem }\r\n    this.tableChild.tableData = [...this.tableChild.tableData]\r\n  }\r\n\r\n  parseStatutForStatutValide(documentItem) {\r\n    return moment().isAfter(\r\n      moment(documentItem.dateEmission).add(\r\n        documentItem.echeancePaiement,\r\n        'days',\r\n      ),\r\n    )\r\n      ? FactureStatutEnum.PaiementRetard\r\n      : FactureStatutEnum.PaiementAttente\r\n  }\r\n\r\n  isNullOrEmpty(str: string): boolean {\r\n    return str == undefined || str.toString().trim() == ''\r\n  }\r\n\r\n  replaceIfIsNullOrEmpty(str: string): string {\r\n    if (!str || this.isNullOrEmpty(str)) {\r\n      return '...'\r\n    } else {\r\n      return str\r\n    }\r\n  }\r\n}\r\n","<p-confirmDialog [style]=\"{width: '50vw'}\" [baseZIndex]=\"10000\" rejectButtonStyleClass=\"p-button-text\">\r\n</p-confirmDialog>\r\n<p-toast [style]=\"{marginTop: 'marginTop'}\" styleClass=\"styleClass\"></p-toast>\r\n\r\n<div class=\"main pt-5\">\r\n    <div class=\"grid  mx-0 \">\r\n        <div class=\"leftSection md:col-12 p-0 positon-relative\">\r\n            <div class=\"pl-3\">\r\n                <div class=\"header flex justify-content-between align-items-start\">\r\n                    <div class=\"flex  flex-wrap align-items-baseline\">\r\n                        <img [src]=\"imageSrc\" class=\"mr-3\" />\r\n                        <h1 class=\"title\" [ngClass]=\"'color-' + primaryColor\">{{title}}s</h1>\r\n                    </div>\r\n\r\n                    <button pButton (click)=\"newDevis()\" class=\"btn-new-devis text-normal\" [ngClass]=\"'bg-' + primaryColor\" [label]=\"'Nouvelle ' + title\"></button>\r\n\r\n                </div>\r\n                <p class=\"subtitle pt-2\">Visualisez, modifiez et gérez toutes vos factures !</p>\r\n\r\n                <span class=\"searchInput p-input-icon-left mt-2 shadow-1\">\r\n                    <i class=\"pi pi-search\"></i>\r\n                    <input pInputText [(ngModel)]=\"searchText\"\r\n                        (input)=\"emitFilterEvent('filterByInput', $event.target.value)\" class=\"\"\r\n                        placeholder=\"Rechercher ici\" />\r\n                </span>\r\n\r\n                <div class=\"flex align-items-center pt-4 filterContainer\">\r\n                    <p-autoComplete [(ngModel)]=\"selectedClient\" placeholder=\"Client\" [suggestions]=\"clientSuggestions\" (completeMethod)=\"clientAutoCompleteSearch($event)\" field=\"displayName\" (onSelect)=\"emitFilterEvent('filterByButton', null)\"></p-autoComplete>\r\n                    <p-calendar [(ngModel)]=\"selectedDate\" selectionMode=\"range\" placeholder=\"Date\" (onSelect)=\"emitDateFilterEvent($event)\"></p-calendar>\r\n                    <p-inputNumber [(ngModel)]=\"selectedEcheance\" placeholder=\"Echéance\" (onInput)=\"selectedEcheance = $event.value; emitFilterEvent('filterByButton', null)\">\r\n                    </p-inputNumber>\r\n                    <p-inputNumber [(ngModel)]=\"selectedMontant\" placeholder=\"Montant\" mode=\"decimal\" [minFractionDigits]=\"2\" (onInput)=\"selectedMontant = $event.value; emitFilterEvent('filterByButton', null)\">\r\n                    </p-inputNumber>\r\n                    <p-dropdown [options]=\"statutOptions\" [(ngModel)]=\"selectedStatut\" placeholder=\"Statut\" optionLabel=\"label\" optionValue=\"value\" [showClear]=\"false\" (onChange)=\"emitFilterEvent('filterByButton', null)\"></p-dropdown>\r\n\r\n                    <button pButton pRipple type=\"button\" icon=\"fa fa-undo\" (click)=\"resetFilterFields()\" [ngClass]=\"'p-button-rounded ml-2 bg-' + primaryColor \"></button>\r\n\r\n                </div>\r\n            </div>\r\n\r\n            <app-table #dt1 [cols]=\"cols\" [styleClass]=\"'table'\" [styleId]=\"'devisList'\" [highlightColorInput]=\"tableSelectionColor\" [filterEvent]=\"filterSubject.asObservable()\" [getListApi$]=\"getListDevisApi$\" [statusItems]=\"factureStatusItems\" [globalFilterFields]=\"['reference','client','dateEmission','echeancePaiement', 'montantTtc','statut']\">\r\n            </app-table>\r\n\r\n            <div class=\"devisTotal flex justify-content-between align-items-center w-100\">\r\n                <span class=\"color-gray \">Total TTC</span>\r\n                <span class=\"color-gray\">{{montantTotalAllDevis | number:'1.2-2' }}\r\n                    {{' ' + (selectedDevisItem && selectedDevisItem.currency)}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"rightSection md:col-12 p-0\">\r\n            <div class=\"devis-details\">\r\n                <div class=\"header flex justify-content-end\">\r\n                    <div class=\"flex\">\r\n                        <button pButton label=\"Télécharger\" (click)=\"downloadAsPDF()\" class=\"p-button-text\"></button>\r\n                        <button pButton label=\"Imprimer\" class=\"p-button-text\" (click)=\"print()\"></button>\r\n                        <button pButton label=\"Dupliquer\" class=\"p-button-text\" (click)=\"duplicateDevis()\"></button>\r\n                        <button pButton label=\"Modifier\" class=\"p-button-text\" (click)=\"editDevis()\"></button>\r\n                        <button pButton label=\"Supprimer\" class=\"p-button-text\" (click)=\"deleteDevis()\"></button>\r\n                    </div>\r\n                </div>\r\n                <app-item-preview #prv [item]=\"selectedDevisItem\" [title]=\"title\" [logoSrc]=\"logoSrc\" [summaryTotalHT]=\"summaryTotalHT\" [summaryTVA]=\"summaryTVA\" [remiseAmount]=\"remiseAmount\">\r\n                </app-item-preview>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<app-factures-dialog #devisDialog [visible]=\"displayDialog\" (openDialogEvent)=\"displayDialog=true\" (closeDialogEvent)=\"onDialogClose()\" (crudOperationEvent)=\"crudOperationTreatment($event)\" (emitCheckFormIsValidEvent)=\"updateInvoiceStatusToValid($event)\"\r\n    [dataItem]=\"invoiceItemProp\" [dialogStatus]=\"invoiceDialogStatus\">\r\n</app-factures-dialog>"],"sourceRoot":"webpack:///"}