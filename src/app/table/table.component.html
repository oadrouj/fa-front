<p-table #tbl [columns]="cols" [value]="tableData" [rowTrackBy]="trackByFunction" selectionMode="single" [(selection)]="defaultRowToBeSelected" dataKey="reference" (onRowSelect)="onRowSelect($event)" [id]="styleId" [scrollable]="true" [rows]="10" scrollHeight="250px"
    [lazy]="true" (onLazyLoad)="loadTableLazy($event)" [virtualScroll]="true" [globalFilterFields]="globalFilterFields" [virtualRowHeight]="40" [class]="styleClass">
    <ng-template pTemplate="header" let-columns>
        <tr>
            <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                {{col.header}}
                <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr style="height:40px" [pSelectableRow]="rowData">
            <ng-container *ngFor="let colVar of columns">
                <ng-container [ngSwitch]="colVar.type">

                    <ng-container *ngSwitchCase="'date'">
                        <td [colSpan]="colVar.colspan">
                            {{colVar.format(rowData[colVar.field]) | date:'shortDate'}}
                        </td>
                    </ng-container>

                    <ng-container *ngSwitchCase="'currency'">
                        <td [colSpan]="colVar.colspan" mode="decimal">
                            {{rowData[colVar.field] || 0 | number:'1.2-2' }} {{' ' + currency}}
                        </td>
                    </ng-container>

                    <ng-container *ngSwitchCase="'pourcentage'">
                        <td [colSpan]="colVar.colspan">
                            {{rowData[colVar.field] + '%'}}
                        </td>
                    </ng-container>

                    <ng-container *ngSwitchDefault>
                        <td [colSpan]="colVar.colspan">
                            {{colVar.format ? colVar.format(colMethod(rowData, colVar.field), rowData.referencePrefix) : colMethod(rowData, colVar.field)}} {{colVar.suffix && ' ' + colVar.suffix}}
                        </td>
                    </ng-container>

                </ng-container>

            </ng-container>

        </tr>
    </ng-template>

    <ng-template pTemplate="loadingbody" let-columns="columns">
        <tr style="height:34px">
            <td *ngFor="let col of columns">
                <p-skeleton [ngStyle]="{'width': '100%'}"></p-skeleton>
            </td>
        </tr>
    </ng-template>

</p-table>